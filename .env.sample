# 应用环境变量示例文件（请复制为 .env 并按需修改）
# 根据 config.py 中的读取逻辑整理

# ==================== 安全配置 ====================
# Flask 应用密钥（生产环境务必修改）
SECRET_KEY=changeme-in-production

# ==================== 服务器配置 ====================
# 监听地址与端口
HOST=0.0.0.0
PORT=5552
# 调试模式（生产环境请设为 False）
DEBUG=False

# ==================== 上传与限制 ====================
# 单个文件最大大小（单位：MB）
MAX_CONTENT_LENGTH=1000

# ==================== 日志配置 ====================
# 日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# 是否启用结构化日志
ENABLE_STRUCTURED_LOGGING=False
# 是否启用性能监控日志
ENABLE_PERFORMANCE_MONITORING=False
# 是否允许浏览器控制台日志输出
ENABLE_BROWSER_CONSOLE_LOG=False
# 日志轮转：单个日志文件最大大小（MB）
LOG_MAX_SIZE=10
# 日志轮转：保留备份文件数量
LOG_BACKUP_COUNT=5
# 按时间轮转的备份文件数量
TIMED_LOG_BACKUP_COUNT=30

# ==================== 默认设置 ====================
# Whisper 默认模型：tiny, base, small, medium, large 等
DEFAULT_MODEL=small
# 默认语言（auto 为自动检测）
DEFAULT_LANGUAGE=auto
# 默认 GPU ID 列表，逗号分隔，例如：0,1
DEFAULT_GPU_IDS=

# ==================== 转录设置 ====================
# 最大并发转录任务数
MAX_CONCURRENT_TRANSCRIPTIONS=5
# 单个转录任务超时时间（秒）
TRANSCRIPTION_TIMEOUT=3600
# 长音频分段处理时长（秒）
SEGMENT_DURATION=30

# ==================== 安全配置 ====================
# 允许上传的扩展名（逗号分隔）
ALLOWED_EXTENSIONS=wav,mp3,mp4,avi,mov,m4a,flac,ogg,wma,aac
# 文件名最大长度
MAX_FILENAME_LENGTH=255

# ==================== 内存管理 ====================
# 显存安全边距（比例，0~1）
MEMORY_SAFETY_MARGIN=0.1
# 预留显存大小（GB）
RESERVED_MEMORY=0.0

# 显存预估置信因子（乘数，1.0为基准）
MEMORY_CONFIDENCE_FACTOR=1.0

# 模型缓存/基路径（留空则使用默认 ~/.cache/whisper）
MODEL_BASE_PATH=

# 是否启用优化系统（批处理、调度等）
ENABLE_OPTIMIZATION_SYSTEM=True

# 批量调度检查间隔（秒）
BATCH_SCHEDULE_INTERVAL=2

# 任务失败最大重试次数
MAX_TASK_RETRIES=3

# 显存校准因子（用于修正预估偏差）
MEMORY_CALIBRATION_FACTOR=1.0

# 性能监控采样间隔（秒）
PERFORMANCE_MONITOR_INTERVAL=30

# 启用自适应优化（动态调整批量等）
ENABLE_ADAPTIVE_OPTIMIZATION=True

# 最小批量大小
MIN_BATCH_SIZE=1

# 最大批量大小
MAX_BATCH_SIZE=5

# WebSocket ping 超时（秒）
WEBSOCKET_PING_TIMEOUT=60

# WebSocket ping 间隔（秒）
WEBSOCKET_PING_INTERVAL=25

# 后台工作线程数量
WORKER_THREADS=4

# 文件与资源清理间隔（秒）
CLEANUP_INTERVAL=3600

# 触发内存清理的利用率阈值（0~1）
MEMORY_CLEANUP_THRESHOLD=0.9

# 每块 GPU 允许的最大任务数
MAX_TASKS_PER_GPU=10

# 限定允许的模型列表（逗号分隔，留空为不限）
SUPPORTED_MODELS=

# 批量超时时间（秒），超时后立即执行批处理
BATCH_TIMEOUT=5

# 显存校准采样数（条）
CALIBRATION_SAMPLE_SIZE=50
