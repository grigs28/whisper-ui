# 配置参数修改报告

## 1. 删除的参数

### SQLALCHEMY_DATABASE_URI
- **位置**: config.py
- **删除原因**: 该参数在.env和.env.sample中均未定义，属于无用参数
- **调用程序**: 无直接调用程序

### SQLALCHEMY_TRACK_MODIFICATIONS
- **位置**: config.py
- **删除原因**: 该参数在.env和.env.sample中均未定义，属于无用参数
- **调用程序**: 无直接调用程序

## 2. 新增的参数

### BATCH_TIMEOUT
- **位置**: config.py
- **作用**: 批量任务调度超时时间(秒)
- **调用程序**: core/batch_scheduler.py
- **默认值**: 5秒
- **说明**: 用于控制批量任务调度器的超时时间

### MEMORY_CONFIDENCE_FACTOR
- **位置**: config.py
- **作用**: 显存校准置信因子，用于动态调整模型显存预估
- **调用程序**: core/memory_manager.py
- **默认值**: 1.2
- **说明**: 用于在显存校准过程中考虑标准差因素

### CALIBRATION_SAMPLE_SIZE
- **位置**: config.py
- **作用**: 显存校准样本数量
- **调用程序**: core/memory_manager.py
- **默认值**: 50
- **说明**: 控制显存校准过程中保留的样本数量

### MAX_TASKS_PER_GPU
- **位置**: config.py
- **作用**: 每个GPU的最大并发任务数
- **调用程序**: core/gpu_manager.py
- **默认值**: 3
- **说明**: 限制每个GPU上同时运行的任务数量

## 3. 参数修改说明

### MAX_CONTENT_LENGTH
- **位置**: config.py
- **修改前**: 默认值为1000MB
- **修改后**: 默认值为500MB（与.env.sample保持一致）
- **调用程序**: main.py, config.py
- **说明**: 单个文件最大大小限制

### DEFAULT_MODEL
- **位置**: config.py
- **修改前**: 默认值为'base'
- **修改后**: 默认值为'turbo'（与.env.sample保持一致）
- **调用程序**: main.py, config.py
- **说明**: 默认使用的Whisper模型

## 4. 配置参数分类

### 服务器配置
- HOST: 服务器监听地址
- PORT: 服务器端口号
- DEBUG: 调试模式开关

### 文件上传配置
- UPLOAD_FOLDER: 上传文件存储目录
- OUTPUT_FOLDER: 转录结果输出目录
- MAX_CONTENT_LENGTH: 单个文件最大大小限制

### 日志配置
- LOG_FILE: 日志文件路径
- LOG_LEVEL: 日志级别
- MAX_LOG_SIZE: 单个日志文件最大大小
- LOG_BACKUP_COUNT: 保留的日志文件备份数量

### 默认设置
- DEFAULT_MODEL: 默认使用的Whisper模型
- DEFAULT_LANGUAGE: 默认语言设置
- DEFAULT_GPU_IDS: 默认使用的GPU ID

### 转录设置
- MAX_CONCURRENT_TRANSCRIPTIONS: 最大并发转录任务数
- TRANSCRIPTION_TIMEOUT: 单个转录任务超时时间
- SEGMENT_DURATION: 长音频分段处理时长

### 文件管理
- MAX_FILE_AGE: 文件最大保存天数

### 安全配置
- ALLOWED_EXTENSIONS: 允许上传的音频文件扩展名
- MAX_FILENAME_LENGTH: 文件名最大长度限制

### GPU配置
- MAX_GPU_MEMORY: GPU显存使用上限比例
- MEMORY_SAFETY_MARGIN: 显存安全边距
- RESERVED_MEMORY: 预留显存大小

### 模型配置
- MODEL_BASE_PATH: Whisper模型存储基础路径
- SUPPORTED_MODELS: 系统支持的模型列表

### 优化系统配置
- ENABLE_OPTIMIZATION_SYSTEM: 启用优化系统
- BATCH_SCHEDULE_INTERVAL: 批量任务调度间隔
- MAX_TASK_RETRIES: 最大任务重试次数
- MEMORY_CALIBRATION_FACTOR: 显存校准参数
- PERFORMANCE_MONITOR_INTERVAL: 性能监控间隔
- ENABLE_ADAPTIVE_OPTIMIZATION: 自适应优化开关
- MIN_CONCURRENT_TASKS: 最小并发任务数
- MAX_CONCURRENT_TASKS_LIMIT: 最大并发任务数限制

### WebSocket配置
- WEBSOCKET_PING_TIMEOUT: WebSocket连接超时时间
- WEBSOCKET_PING_INTERVAL: WebSocket心跳检测间隔

### 性能配置
- WORKER_THREADS: 工作线程数
- CLEANUP_INTERVAL: 自动清理任务执行间隔
- MEMORY_CLEANUP_THRESHOLD: 内存清理触发阈值

### 批量任务调度配置
- BATCH_TIMEOUT: 批量任务调度超时时间
- MIN_BATCH_SIZE: 最小批处理大小
- MAX_BATCH_SIZE: 最大批处理大小

### 显存管理配置
- MEMORY_CONFIDENCE_FACTOR: 显存校准置信因子
- CALIBRATION_SAMPLE_SIZE: 显存校准样本数量

### GPU管理配置
- MAX_TASKS_PER_GPU: 每个GPU的最大并发任务数
